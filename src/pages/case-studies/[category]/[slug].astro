---
import { getCollection, type CollectionEntry } from "astro:content";
import CaseLayout from "@layouts/CaseLayout.astro";

export async function getStaticPaths() {
  const all = await getCollection("cases");
  return all.map((entry) => {
    const [category, slug] = entry.slug.split("/");   // ← разбиваем на 2 части
    return { params: { category, slug }, props: { entry } }; // ← два параметра
  });
}

const { entry } = Astro.props as { entry: CollectionEntry<"cases"> };
const { title, excerpt, tags, cover } = entry.data;
const { Content } = await entry.render();
---
<CaseLayout title={title} excerpt={excerpt} tags={tags} hero={cover}>
  <section class="section">
    <div class="container">
      <article class="card" style="padding:20px">
        <Content />
      </article>
    </div>
  </section>
</CaseLayout>
